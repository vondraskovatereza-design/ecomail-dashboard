<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoMail Automations Network</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
        }
        
        .wrapper {
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 15px;
            gap: 15px;
        }
        
        .header {
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 5px;
        }
        
        .header .stats {
            display: flex;
            gap: 20px;
            font-size: 0.85em;
            color: #666;
            margin-top: 10px;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stat strong {
            color: #667eea;
        }
        
        .controls {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: #5568d3;
        }
        
        .canvas-container {
            flex: 1;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .legend {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255,255,255,0.95);
            padding: 12px;
            border-radius: 8px;
            font-size: 0.75em;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .legend h4 {
            margin-bottom: 8px;
            color: #667eea;
            font-size: 1em;
        }
        
        .legend-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            pointer-events: none;
            display: none;
            z-index: 1000;
            max-width: 200px;
            line-height: 1.5;
        }
        
        .tooltip strong {
            color: #FFD700;
        }
        
        .info-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(102, 126, 234, 0.95);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.8em;
            backdrop-filter: blur(10px);
        }
        
        .info-badge div {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 5px;
        }
        
        .info-badge div:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>üéØ EcoMail Automations Network</h1>
            <div class="stats">
                <div class="stat">üìä <strong>26</strong> automatizac√≠</div>
                <div class="stat">üí∞ <strong>33.6M Kƒç</strong> celkov√Ω p≈ô√≠jem</div>
                <div class="stat">üìß <strong>2.3M</strong> doruƒçeno</div>
            </div>
            <div class="controls">
                <button class="btn" onclick="showAll()">Zobrazit v≈°e (26)</button>
                <button class="btn" onclick="showTop10()">Top 10 ‚≠ê</button>
                <button class="btn" onclick="showMillionPlus()">1M+ Kƒç üíé</button>
                <button class="btn" onclick="resetView()">üîÑ Reset</button>
            </div>
        </div>
        
        <div class="canvas-container">
            <canvas id="canvas"></canvas>
            
            <div class="legend">
                <h4>Kategorie</h4>
                <div class="legend-grid">
                    <div class="legend-item"><div class="legend-dot" style="background:#FFE699"></div>Newsletter</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#C6E0B4"></div>Lead Gen</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#FADADD"></div>Retention</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#D9E1F2"></div>First Buy</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#F8CBAD"></div>Reactive</div>
                    <div class="legend-item"><div class="legend-dot" style="background:#FFC0CB"></div>Birthday</div>
                </div>
            </div>
            
            <div class="info-badge" id="infoBadge" style="display:none;">
                <div><span>Automatizac√≠:</span><strong id="visibleCount">26</strong></div>
                <div><span>P≈ô√≠jem:</span><strong id="visibleRevenue">33.6M Kƒç</strong></div>
            </div>
            
            <div class="tooltip" id="tooltip"></div>
        </div>
    </div>

    <script>
        const automations = [
            {name: "Obecn√Ω newsletter", value: 10249641, delivered: 808590, openRate: "20.74%", ctr: "11.49%", color: "#FFE699"},
            {name: "Mailocator (mandle)", value: 4694000, delivered: 20229, openRate: "61.57%", ctr: "27.18%", color: "#C6E0B4"},
            {name: "Doplnƒõn√≠ z√°sob", value: 2934477, delivered: 197236, openRate: "26.69%", ctr: "13.04%", color: "#FADADD"},
            {name: "10% sleva", value: 2591825, delivered: 10652, openRate: "54.43%", ctr: "26.97%", color: "#D9E1F2"},
            {name: "RFM: Pozornost", value: 1913408, delivered: 120180, openRate: "22.32%", ctr: "10.20%", color: "#FADADD"},
            {name: "P≈ô√°n√≠ k sv√°tku", value: 1903110, delivered: 237971, openRate: "29.78%", ctr: "8.20%", color: "#FFC0CB"},
            {name: "Opu≈°tƒõn√Ω ko≈°√≠k", value: 1848679, delivered: 15825, openRate: "40.25%", ctr: "25.26%", color: "#FFB6C1"},
            {name: "Vƒõrnostn√≠ slevy", value: 1663202, delivered: 13159, openRate: "60.58%", ctr: "15.29%", color: "#FADADD"},
            {name: "Soft reaktivace", value: 1614157, delivered: 228598, openRate: "7.76%", ctr: "16.02%", color: "#F8CBAD"},
            {name: "Prvon√°kupci", value: 1109607, delivered: 127144, openRate: "25.77%", ctr: "15.91%", color: "#D9E1F2"},
            {name: "Opu≈°tƒõn√© prohl√≠≈æen√≠", value: 786375, delivered: 29803, openRate: "24.21%", ctr: "16.99%", color: "#DDA0DD"},
            {name: "RFM: Hib. dobr√Ω", value: 555757, delivered: 33628, openRate: "26.99%", ctr: "8.18%", color: "#FADADD"},
            {name: "Registrace", value: 530761, delivered: 74686, openRate: "32.36%", ctr: "15.15%", color: "#E2EFDA"},
            {name: "RFM: Hib. bƒõ≈æn√Ω", value: 411611, delivered: 124090, openRate: "21.51%", ctr: "5.75%", color: "#FADADD"},
            {name: "RFM: Ztracen√Ω", value: 398102, delivered: 158487, openRate: "26.47%", ctr: "4.54%", color: "#F8CBAD"},
            {name: "Recenze 2025", value: 211719, delivered: 21990, openRate: "28.45%", ctr: "9.61%", color: "#FFF2CC"},
            {name: "Edukace", value: 126166, delivered: 47573, openRate: "12.47%", ctr: "12.46%", color: "#FCE4D6"},
            {name: "V√°noƒçn√≠ kucha≈ôka", value: 13891, delivered: 715, openRate: "65.45%", ctr: "76.50%", color: "#F4B084"},
            {name: "Mailocator pist√°cie", value: 9196, delivered: 431, openRate: "28.31%", ctr: "36.07%", color: "#C6E0B4"},
            {name: "Recenze novinky", value: 1734, delivered: 74, openRate: "54.05%", ctr: "35.00%", color: "#FFF2CC"},
            {name: "Affiliate", value: 989, delivered: 117, openRate: "70.09%", ctr: "21.95%", color: "#B4C7E7"},
            {name: "Budƒõjƒç√°ky", value: 757, delivered: 222, openRate: "17.12%", ctr: "7.89%", color: "#D5A6BD"},
            {name: "K narozenin√°m", value: 453, delivered: 42, openRate: "78.57%", ctr: "21.21%", color: "#FFC0CB"},
            {name: "Velikonoce", value: 0, delivered: 29, openRate: "44.83%", ctr: "84.62%", color: "#F4B084"}
        ];
        
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        
        let nodes = [];
        let filter = 'all';
        
        function resize() {
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            init();
            draw();
        }
        
        function init() {
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            
            nodes = [{
                x: cx, y: cy, r: 40,
                label: 'EcoMail', color: '#667eea', center: true
            }];
            
            let visible = getVisible();
            const step = (2 * Math.PI) / visible.length;
            const dist = Math.min(canvas.width, canvas.height) * 0.32;
            
            visible.forEach((a, i) => {
                const angle = i * step;
                nodes.push({
                    x: cx + Math.cos(angle) * dist,
                    y: cy + Math.sin(angle) * dist,
                    r: Math.max(12, Math.sqrt(a.value) / 70),
                    label: a.name,
                    color: a.color,
                    data: a
                });
            });
        }
        
        function getVisible() {
            if (filter === 'top10') return [...automations].sort((a,b) => b.value - a.value).slice(0,10);
            if (filter === 'million') return automations.filter(a => a.value >= 1000000);
            return automations;
        }
        
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Lines
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 2;
            for (let i = 1; i < nodes.length; i++) {
                ctx.beginPath();
                ctx.moveTo(nodes[0].x, nodes[0].y);
                ctx.lineTo(nodes[i].x, nodes[i].y);
                ctx.stroke();
            }
            
            // Nodes
            nodes.forEach(n => {
                ctx.shadowColor = 'rgba(0,0,0,0.2)';
                ctx.shadowBlur = 8;
                ctx.shadowOffsetX = 2;
                ctx.shadowOffsetY = 2;
                
                ctx.fillStyle = n.color;
                ctx.beginPath();
                ctx.arc(n.x, n.y, n.r, 0, 2 * Math.PI);
                ctx.fill();
                
                ctx.strokeStyle = n.center ? '#764ba2' : '#fff';
                ctx.lineWidth = 2.5;
                ctx.stroke();
                
                ctx.shadowColor = 'transparent';
                
                ctx.fillStyle = n.center ? '#fff' : '#333';
                ctx.font = n.center ? 'bold 12px sans-serif' : '10px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(n.label.substring(0, 15), n.x, n.y);
            });
        }
        
        function fmt(v) {
            if (v >= 1e6) return (v/1e6).toFixed(1) + 'M Kƒç';
            if (v >= 1e3) return (v/1e3).toFixed(0) + 'K Kƒç';
            return v + ' Kƒç';
        }
        
        canvas.addEventListener('mousemove', e => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            let found = false;
            for (let n of nodes) {
                const dx = x - n.x, dy = y - n.y;
                if (Math.sqrt(dx*dx + dy*dy) < n.r && !n.center && n.data) {
                    tooltip.style.display = 'block';
                    tooltip.style.left = (e.clientX + 10) + 'px';
                    tooltip.style.top = (e.clientY + 10) + 'px';
                    tooltip.innerHTML = `<strong>${n.data.name}</strong><br>üí∞ ${fmt(n.data.value)}<br>üìß ${n.data.delivered.toLocaleString()}<br>üëÅÔ∏è ${n.data.openRate} ‚Ä¢ üñ±Ô∏è ${n.data.ctr}`;
                    canvas.style.cursor = 'pointer';
                    found = true;
                    break;
                }
            }
            if (!found) {
                tooltip.style.display = 'none';
                canvas.style.cursor = 'default';
            }
        });
        
        function showAll() { filter = 'all'; resize(); }
        function showTop10() { filter = 'top10'; resize(); }
        function showMillionPlus() { filter = 'million'; resize(); }
        function resetView() { filter = 'all'; resize(); }
        
        window.addEventListener('resize', resize);
        resize();
    </script>
</body>
</html>
